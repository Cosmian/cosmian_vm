---
# tasks file for upgrade

- name: Update and upgrade apt packages
  when: ansible_distribution == 'Ubuntu'
  ansible.builtin.apt:
    update_cache: true
    only_upgrade: true
    upgrade: safe
  tags: ubuntu

- name: Upgrade all packages
  when: ansible_distribution == 'Redhat'
  block:
    - name: Install packages
      ansible.builtin.dnf:
        name:
          - python-firewall
          - firewalld
        state: present
        update_cache: true

    - name: Update all packages
      ansible.builtin.dnf:
        name: "*"
        state: latest
        update_only: true
      tags: redhat
